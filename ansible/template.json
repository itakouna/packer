{
  "variables": {
    "password": "gridscale2019",
    "hostname": "ubuntu",
    "server_cores": "2",
    "server_memory": "4",
    "storage_capacity": "10",
    "template_uuid": "4db64bfc-9fb2-4976-80b5-94ff43b1233a"
  },

  "builders": [{
    "type": "gridscale",
    "password": "{{user `password`}}",
    "hostname": "{{user `hostname`}}",
    "ssh_username" : "root",
    "server_memory": "{{user `server_memory`}}",
    "server_cores": "{{user `server_cores`}}",
    "storage_capacity": "{{user `storage_capacity`}}",
    "template_uuid": "{{user `template_uuid`}}"
  }],

  "provisioners": [
    {
    "type": "ansible",
    "extra_arguments": [ "--extra-vars", "upgrade_os=true"],
    "playbook_file": "ansible/playbook_os.yml"
  },    {
    "type": "shell",
    "expect_disconnect": true,
    "inline": [
      "/sbin/reboot"
    ]
  },
  {
    "type": "ansible",
    "extra_arguments": [ "--extra-vars", "k8s_version=1.15.2"],
    "playbook_file": "ansible/playbook_k8s.yml"
  }
  ]
}
